{% extends "object_detail_base.html" %}
{% load stock_tags %}
{% block title %}
  Reagent Validation
{% endblock title %}
{% block panel_title %}
  <i class="bi bi-clipboard-check-fill validation-text-color"></i> Validation(s) -
  <span class="small">
    <a href="{% url object_to_validate_detail_url object_to_validate.pk %}">{{ object_to_validate }}</a>
  </span>
{% endblock panel_title %}
{% block panel_actions %}
  <span class="p-1">
    <a href="{% url 'validation_create' object_type object_to_validate.pk %}?next={{ request.path }}"
       title="New Validation"
       class="btn btn-sm btn-success">
      <i class="bi bi-plus-circle"></i> New Validation</a>
  </span>
{% endblock panel_actions %}
{% block panel_content %}
  <div class="p-3">
    <div class="table-responsive">
      <table class="table table-sm table-hover">
        <thead>
          <tr>
            <th width="20%">Status</th>
            <th width="13%">Validated</th>
            <th width="13%">Authorised</th>
            <th>Comments</th>
            <th width="10%"></th>
          </tr>
        </thead>
        <tbody>
          {% for validation in validations %}
            <tr>
              <td>{% validation_status validation.status True %}</td>
              <td class="small">
                {{ validation.created|date:"d/m/Y" }}
                <span data-bs-toggle="tooltip"
                      title="{{ validation.created_by.get_full_name }}">{{ validation.created_by.initials }}</span>
              </td>
              <td class="small">
                {{ validation.authorised|date:"d/m/Y" }}
                <span data-bs-toggle="tooltip"
                      title="{{ validation.authorised_by.get_full_name }}">
                  {{ validation.authorised_by.initials }}
                </span>
              </td>
              <td>{{ validation.comments }}</td>
              <td>
                {{ validation.pk }} <i class="bi bi-pencil-square"></i> <i class="bi bi-trash"></i>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="panel my-4">
      <div class="panel-heading d-flex justify-content-between align-items-center pe-2">
        <span class="fw-bold"><i class="bi bi-folder2-open text-warning"></i> Documents</span>
        <a hx-get=""
           hx-trigger="click"
           hx-target="#crudModal .modal-content"
           hx-swap="innerHTML"
           data-bs-toggle="modal"
           data-bs-target="#crudModal"
           href="javascript:"
           class="btn btn-sm btn-success"><i class="bi bi-file-earmark-arrow-up"></i> Upload</a>
      </div>
      <div class="panel-content">Validation documents</div>
    </div>
  </div>
{% endblock panel_content %}
