{% extends "object_list_base.html" %}
{% block title %}
  In-house Reagents
{% endblock title %}
{% block panel_title %}
  <i class="bi bi-bounding-box inhouse-text-color"></i> In-house Reagents
{% endblock panel_title %}
{% block panel_actions %}
  <a href="{% url 'inhouse_create' %}" class="btn btn-sm btn-success"><i class="bi bi-plus-circle"></i> New Reagent</a>
{% endblock panel_actions %}
{% block panel_content %}
  <!-- Headings for larger screens -->
  <div class="row d-none d-lg-flex g-2 mb-2 fw-bold">
    <div class="col-md-3">Item</div>
    <div class="col-md-2">Product ID</div>
    <div class="col-md-4">Components</div>
    <div class="col-auto d-none d-lg-block">{% include "partials/tooltray_toggle_icon.html" %}</div>
  </div>
  {% for reagent in inhouse_reagents %}
    <!-- Each reagent entry as a row -->
    <div class="row g-2 mb-2 align-items-center">
      <!-- Item -->
      <div class="col-12 col-md-3 mb-2 mb-md-0">
        <a href="{% url 'inhouse_detail' reagent.pk %}">{{ reagent.name }}</a>
      </div>
      <!-- Product ID -->
      <div class="col-6 col-md-2 mb-2 mb-md-0 small">{{ reagent.product_id }}</div>
      <!-- Components -->
      <div class="col-6 col-md-4 mb-2 mb-md-0">
        {% for comp in reagent.components.all %}
          {{ comp.item.name }}
          {% if not forloop.last %},{% endif %}
        {% endfor %}
      </div>
      <!-- Actions -->
      <div class="col-auto d-none d-lg-block">
        <span class="tooltray-container d-none">
          <a href="{% url 'inhouse_update' reagent.pk %}"><i class="bi bi-pencil-square"></i></a>
          <a hx-get="{% url 'inhouse_delete' reagent.pk %}"
             hx-trigger="click"
             hx-target="#crudModal .modal-content"
             hx-swap="innerHTML"
             data-bs-toggle="modal"
             data-bs-target="#crudModal"
             href="javascript:"><i class="bi bi-trash"></i></a>
        </span>
      </div>
    </div>
  {% endfor %}
{% endblock panel_content %}
